{
  "folder": null,
  "name": "Polac",
  "type": "character",
  "img": "icons/svg/mole.svg",
  "system": {
    "hidden": [
      {
        "name": "vieMax",
        "value": "${totalEN*2}$"
      },
      {
        "name": "modFO",
        "value": "${totalFO <= 0 ? -25 : totalFO <= 8 ?(round(totalFO/2)*5) - 25 : totalFO >= 13 ? (round(totalFO/2)*5 - 30) : 0}$"
      },
      {
        "name": "modEN",
        "value": "${totalEN <= 0 ? -25 : totalEN <= 8 ?(round(totalEN/2)*5) - 25 : totalEN >= 13 ? (round(totalEN/2)*5 - 30) : 0}$"
      },
      {
        "name": "modAG",
        "value": "${totalAG <= 0 ? -25 : totalAG <= 8 ?(round(totalAG/2)*5) - 25 : totalAG >= 13 ? (round(totalAG/2)*5 - 30) : 0}$"
      },
      {
        "name": "modRA",
        "value": "${totalRA <= 0 ? -25 : totalRA <= 8 ?(round(totalRA/2)*5) - 25 : totalRA >= 13 ? (round(totalRA/2)*5 - 30) : 0}$"
      },
      {
        "name": "modPE",
        "value": "${totalPE <= 0 ? -25 : totalPE <= 8 ?(round(totalPE/2)*5) - 25 : totalPE >= 13 ? (round(totalPE/2)*5 - 30) : 0}$"
      },
      {
        "name": "modVO",
        "value": "${totalVO <= 0 ? -25 : totalVO <= 8 ?(round(totalVO/2)*5) - 25 : totalVO >= 13 ? (round(totalVO/2)*5 - 30) : 0}$"
      },
      {
        "name": "totalAB",
        "value": "${baseAB + modAB}$"
      },
      {
        "name": "totalAN",
        "value": "${baseAN + modAN}$"
      },
      {
        "name": "totalAR",
        "value": "${baseAR + modAR}$"
      },
      {
        "name": "totalES",
        "value": "${baseES + modES}$"
      },
      {
        "name": "initiative",
        "value": "${totalRA + bonusInitiative + initTactique}$"
      },
      {
        "name": "initTactique",
        "value": "${switchCase(tactique, 'AB',-5, 'AR',+5, 0)}$"
      }
    ],
    "header": {
      "contents": [
        {
          "key": "",
          "cssClass": "",
          "role": "0",
          "permission": "0",
          "tooltip": "",
          "visibilityFormula": "",
          "type": "panel",
          "contents": [
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "type": "panel",
              "contents": [
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "Description",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "rollMessageToChat": true,
                  "altRollMessageToChat": true,
                  "style": "subtitle"
                },
                {
                  "key": "",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "Utilisation",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "rollMessageToChat": true,
                  "altRollMessageToChat": true,
                  "style": "subtitle"
                },
                {
                  "key": "description",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "type": "textArea",
                  "label": "",
                  "defaultValue": "",
                  "size": "full-size",
                  "style": "sheet"
                },
                {
                  "key": "utilisation",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "type": "textArea",
                  "label": "",
                  "defaultValue": "",
                  "size": "full-size",
                  "style": "sheet"
                }
              ],
              "flow": "grid-2",
              "align": "justify",
              "collapsible": false,
              "defaultCollapsed": false,
              "title": "",
              "titleStyle": "default"
            },
            {
              "key": "",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "type": "label",
              "size": "full-size",
              "icon": "",
              "value": "Mode de vie et comportement",
              "prefix": "",
              "suffix": "",
              "rollMessage": "",
              "altRollMessage": "",
              "rollMessageToChat": true,
              "altRollMessageToChat": true,
              "style": "subtitle"
            },
            {
              "key": "comportement",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "type": "textArea",
              "label": "",
              "defaultValue": "",
              "size": "full-size",
              "style": "sheet"
            }
          ],
          "flow": "vertical",
          "align": "justify",
          "collapsible": true,
          "defaultCollapsed": false,
          "title": "",
          "titleStyle": "default"
        }
      ],
      "key": "custom_header",
      "cssClass": "",
      "role": 0,
      "permission": 0,
      "tooltip": "",
      "visibilityFormula": "",
      "type": "panel",
      "flow": "vertical",
      "align": "",
      "collapsible": false,
      "defaultCollapsed": true,
      "title": "",
      "titleStyle": "default"
    },
    "body": {
      "contents": [
        {
          "key": "",
          "cssClass": "",
          "role": "0",
          "permission": "0",
          "tooltip": "",
          "visibilityFormula": "",
          "type": "table",
          "contents": [
            [
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "label",
                "size": "full-size",
                "icon": "dice-d10",
                "value": "FO",
                "prefix": "",
                "suffix": "",
                "rollMessage": "<!-- saisie de la difficulté -->\n${#concat(\n\t?{diff:\"Difficulté\"|\"0\",\"Normal\"|\"50\",\"Très facile\"|\"25\",\"Facile\"|\"-25\",\"Difficile\"|\"-50\",\"Très difficile\"},\n\t?{mod:\"Modificateur\"[number]|0}\n)}$\n\n<!-- définition du seuil et du nom du jet-->\n${#seuil:= max(totalFO + diff + mod, 5)}$\n${#nom:=   \"Force\"}$\n\n<!-- jet -->\n${#roll:= [1d100]}$\n${#ru:= roll%10}$\n${#result:= 0}$ \n${#result:=(or(roll == 100, roll > seuil) ? 0 : 1)}$\n${#result:=(and(result==0, ru==1) ? -1 : result)}$\n${#result:=(and(result==1, ru==0) ? 2 : result)}$\n${#switchCase(result,-1,'Echec critique',0,'Echec',1,'Réussite',2,'Réussite critique','autre')}$\n\n<!-- affichage -->\n<h3><strong>${!nom}$</strong> (${!switchCase(diff,\"0\",\"Normal\",\"50\",\"Très facile\",\"25\",\"Facile\",\"-25\",\"Difficile\",\"-50\",\"Très difficile\")}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>\n        d100\n      </th>\n      <td>\n        <div class=\"bl-dropdown\">\n          <p><strong>${!roll}$</strong> / ${!seuil}$</p>\n          <div class=\"bl-dropdown-content\">\n            <p>Difficulté : ${!switchCase(diff,\"0\",\"normale\",\"50\",\"très facile\",\"25\",\"facile\",\"-25\",\"difficile\",\"-50\",\"très difficile\")}$ (${!diff}$)</p>\n            <p>Modificateur : ${!mod}$</p>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        RU\n      </td>\n      <td>\n        <strong>${!ru}$</strong>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p class=\"bl-result ${!result==1 ? \"bl-roll-success\\\">Réussite\" : result==2 ? \"bl-roll-critical-success\\\">Réussite critique\" : result==-1 ? \"bl-roll-critical-fail\\\">Echec critique\" : \"bl-roll-fail\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                "altRollMessage": "",
                "rollMessageToChat": true,
                "altRollMessageToChat": true,
                "style": "bold"
              },
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "label",
                "size": "full-size",
                "icon": "dice-d10",
                "value": "EN",
                "prefix": "",
                "suffix": "",
                "rollMessage": "<!-- saisie de la difficulté -->\n${#concat(\n\t?{diff:\"Difficulté\"|\"0\",\"Normal\"|\"50\",\"Très facile\"|\"25\",\"Facile\"|\"-25\",\"Difficile\"|\"-50\",\"Très difficile\"},\n\t?{mod:\"Modificateur\"[number]|0}\n)}$\n\n<!-- définition du seuil et du nom du jet-->\n${#seuil:= max(totalEN + diff + mod, 5)}$\n${#nom:=   \"Endurance\"}$\n\n<!-- jet -->\n${#roll:= [1d100]}$\n${#ru:= roll%10}$\n${#result:= 0}$ \n${#result:=(or(roll == 100, roll > seuil) ? 0 : 1)}$\n${#result:=(and(result==0, ru==1) ? -1 : result)}$\n${#result:=(and(result==1, ru==0) ? 2 : result)}$\n${#switchCase(result,-1,'Echec critique',0,'Echec',1,'Réussite',2,'Réussite critique','autre')}$\n\n<!-- affichage -->\n<h3><strong>${!nom}$</strong> (${!switchCase(diff,\"0\",\"Normal\",\"50\",\"Très facile\",\"25\",\"Facile\",\"-25\",\"Difficile\",\"-50\",\"Très difficile\")}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>\n        d100\n      </th>\n      <td>\n        <div class=\"bl-dropdown\">\n          <p><strong>${!roll}$</strong> / ${!seuil}$</p>\n          <div class=\"bl-dropdown-content\">\n            <p>Difficulté : ${!switchCase(diff,\"0\",\"normale\",\"50\",\"très facile\",\"25\",\"facile\",\"-25\",\"difficile\",\"-50\",\"très difficile\")}$ (${!diff}$)</p>\n            <p>Modificateur : ${!mod}$</p>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        RU\n      </td>\n      <td>\n        <strong>${!ru}$</strong>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p class=\"bl-result ${!result==1 ? \"bl-roll-success\\\">Réussite\" : result==2 ? \"bl-roll-critical-success\\\">Réussite critique\" : result==-1 ? \"bl-roll-critical-fail\\\">Echec critique\" : \"bl-roll-fail\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                "altRollMessage": "",
                "rollMessageToChat": true,
                "altRollMessageToChat": true,
                "style": "bold"
              },
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "label",
                "size": "full-size",
                "icon": "dice-d10",
                "value": "AG",
                "prefix": "",
                "suffix": "",
                "rollMessage": "<!-- saisie de la difficulté -->\n${#concat(\n\t?{diff:\"Difficulté\"|\"0\",\"Normal\"|\"50\",\"Très facile\"|\"25\",\"Facile\"|\"-25\",\"Difficile\"|\"-50\",\"Très difficile\"},\n\t?{mod:\"Modificateur\"[number]|0}\n)}$\n\n<!-- définition du seuil et du nom du jet-->\n${#seuil:= max(totalAG + diff + mod, 5)}$\n${#nom:=   \"Agilité\"}$\n\n<!-- jet -->\n${#roll:= [1d100]}$\n${#ru:= roll%10}$\n${#result:= 0}$ \n${#result:=(or(roll == 100, roll > seuil) ? 0 : 1)}$\n${#result:=(and(result==0, ru==1) ? -1 : result)}$\n${#result:=(and(result==1, ru==0) ? 2 : result)}$\n${#switchCase(result,-1,'Echec critique',0,'Echec',1,'Réussite',2,'Réussite critique','autre')}$\n\n<!-- affichage -->\n<h3><strong>${!nom}$</strong> (${!switchCase(diff,\"0\",\"Normal\",\"50\",\"Très facile\",\"25\",\"Facile\",\"-25\",\"Difficile\",\"-50\",\"Très difficile\")}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>\n        d100\n      </th>\n      <td>\n        <div class=\"bl-dropdown\">\n          <p><strong>${!roll}$</strong> / ${!seuil}$</p>\n          <div class=\"bl-dropdown-content\">\n            <p>Difficulté : ${!switchCase(diff,\"0\",\"normale\",\"50\",\"très facile\",\"25\",\"facile\",\"-25\",\"difficile\",\"-50\",\"très difficile\")}$ (${!diff}$)</p>\n            <p>Modificateur : ${!mod}$</p>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        RU\n      </td>\n      <td>\n        <strong>${!ru}$</strong>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p class=\"bl-result ${!result==1 ? \"bl-roll-success\\\">Réussite\" : result==2 ? \"bl-roll-critical-success\\\">Réussite critique\" : result==-1 ? \"bl-roll-critical-fail\\\">Echec critique\" : \"bl-roll-fail\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                "altRollMessage": "",
                "rollMessageToChat": true,
                "altRollMessageToChat": true,
                "style": "bold"
              },
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "label",
                "size": "full-size",
                "icon": "dice-d10",
                "value": "RA",
                "prefix": "",
                "suffix": "",
                "rollMessage": "<!-- saisie de la difficulté -->\n${#concat(\n\t?{diff:\"Difficulté\"|\"0\",\"Normal\"|\"50\",\"Très facile\"|\"25\",\"Facile\"|\"-25\",\"Difficile\"|\"-50\",\"Très difficile\"},\n\t?{mod:\"Modificateur\"[number]|0}\n)}$\n\n<!-- définition du seuil et du nom du jet-->\n${#seuil:= max(totalRA + diff + mod, 5)}$\n${#nom:=   \"Rapidité\"}$\n\n<!-- jet -->\n${#roll:= [1d100]}$\n${#ru:= roll%10}$\n${#result:= 0}$ \n${#result:=(or(roll == 100, roll > seuil) ? 0 : 1)}$\n${#result:=(and(result==0, ru==1) ? -1 : result)}$\n${#result:=(and(result==1, ru==0) ? 2 : result)}$\n${#switchCase(result,-1,'Echec critique',0,'Echec',1,'Réussite',2,'Réussite critique','autre')}$\n\n<!-- affichage -->\n<h3><strong>${!nom}$</strong> (${!switchCase(diff,\"0\",\"Normal\",\"50\",\"Très facile\",\"25\",\"Facile\",\"-25\",\"Difficile\",\"-50\",\"Très difficile\")}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>\n        d100\n      </th>\n      <td>\n        <div class=\"bl-dropdown\">\n          <p><strong>${!roll}$</strong> / ${!seuil}$</p>\n          <div class=\"bl-dropdown-content\">\n            <p>Difficulté : ${!switchCase(diff,\"0\",\"normale\",\"50\",\"très facile\",\"25\",\"facile\",\"-25\",\"difficile\",\"-50\",\"très difficile\")}$ (${!diff}$)</p>\n            <p>Modificateur : ${!mod}$</p>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        RU\n      </td>\n      <td>\n        <strong>${!ru}$</strong>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p class=\"bl-result ${!result==1 ? \"bl-roll-success\\\">Réussite\" : result==2 ? \"bl-roll-critical-success\\\">Réussite critique\" : result==-1 ? \"bl-roll-critical-fail\\\">Echec critique\" : \"bl-roll-fail\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                "altRollMessage": "",
                "rollMessageToChat": true,
                "altRollMessageToChat": true,
                "style": "bold"
              },
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "label",
                "size": "full-size",
                "icon": "dice-d10",
                "value": "PE",
                "prefix": "",
                "suffix": "",
                "rollMessage": "<!-- saisie de la difficulté -->\n${#concat(\n\t?{diff:\"Difficulté\"|\"0\",\"Normal\"|\"50\",\"Très facile\"|\"25\",\"Facile\"|\"-25\",\"Difficile\"|\"-50\",\"Très difficile\"},\n\t?{mod:\"Modificateur\"[number]|0}\n)}$\n\n<!-- définition du seuil et du nom du jet-->\n${#seuil:= max(totalPE + diff + mod, 5)}$\n${#nom:=   \"Perception\"}$\n\n<!-- jet -->\n${#roll:= [1d100]}$\n${#ru:= roll%10}$\n${#result:= 0}$ \n${#result:=(or(roll == 100, roll > seuil) ? 0 : 1)}$\n${#result:=(and(result==0, ru==1) ? -1 : result)}$\n${#result:=(and(result==1, ru==0) ? 2 : result)}$\n${#switchCase(result,-1,'Echec critique',0,'Echec',1,'Réussite',2,'Réussite critique','autre')}$\n\n<!-- affichage -->\n<h3><strong>${!nom}$</strong> (${!switchCase(diff,\"0\",\"Normal\",\"50\",\"Très facile\",\"25\",\"Facile\",\"-25\",\"Difficile\",\"-50\",\"Très difficile\")}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>\n        d100\n      </th>\n      <td>\n        <div class=\"bl-dropdown\">\n          <p><strong>${!roll}$</strong> / ${!seuil}$</p>\n          <div class=\"bl-dropdown-content\">\n            <p>Difficulté : ${!switchCase(diff,\"0\",\"normale\",\"50\",\"très facile\",\"25\",\"facile\",\"-25\",\"difficile\",\"-50\",\"très difficile\")}$ (${!diff}$)</p>\n            <p>Modificateur : ${!mod}$</p>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        RU\n      </td>\n      <td>\n        <strong>${!ru}$</strong>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p class=\"bl-result ${!result==1 ? \"bl-roll-success\\\">Réussite\" : result==2 ? \"bl-roll-critical-success\\\">Réussite critique\" : result==-1 ? \"bl-roll-critical-fail\\\">Echec critique\" : \"bl-roll-fail\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                "altRollMessage": "",
                "rollMessageToChat": true,
                "altRollMessageToChat": true,
                "style": "bold"
              },
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "label",
                "size": "full-size",
                "icon": "dice-d10",
                "value": "VO",
                "prefix": "",
                "suffix": "",
                "rollMessage": "<!-- saisie de la difficulté -->\n${#concat(\n\t?{diff:\"Difficulté\"|\"0\",\"Normal\"|\"50\",\"Très facile\"|\"25\",\"Facile\"|\"-25\",\"Difficile\"|\"-50\",\"Très difficile\"},\n\t?{mod:\"Modificateur\"[number]|0}\n)}$\n\n<!-- définition du seuil et du nom du jet-->\n${#seuil:= max(totalVO + diff + mod, 5)}$\n${#nom:=   \"Volonté\"}$\n\n<!-- jet -->\n${#roll:= [1d100]}$\n${#ru:= roll%10}$\n${#result:= 0}$ \n${#result:=(or(roll == 100, roll > seuil) ? 0 : 1)}$\n${#result:=(and(result==0, ru==1) ? -1 : result)}$\n${#result:=(and(result==1, ru==0) ? 2 : result)}$\n${#switchCase(result,-1,'Echec critique',0,'Echec',1,'Réussite',2,'Réussite critique','autre')}$\n\n<!-- affichage -->\n<h3><strong>${!nom}$</strong> (${!switchCase(diff,\"0\",\"Normal\",\"50\",\"Très facile\",\"25\",\"Facile\",\"-25\",\"Difficile\",\"-50\",\"Très difficile\")}$)</h3>\n<table>\n  <tbody>\n    <tr>\n      <th>\n        d100\n      </th>\n      <td>\n        <div class=\"bl-dropdown\">\n          <p><strong>${!roll}$</strong> / ${!seuil}$</p>\n          <div class=\"bl-dropdown-content\">\n            <p>Difficulté : ${!switchCase(diff,\"0\",\"normale\",\"50\",\"très facile\",\"25\",\"facile\",\"-25\",\"difficile\",\"-50\",\"très difficile\")}$ (${!diff}$)</p>\n            <p>Modificateur : ${!mod}$</p>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td>\n        RU\n      </td>\n      <td>\n        <strong>${!ru}$</strong>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p class=\"bl-result ${!result==1 ? \"bl-roll-success\\\">Réussite\" : result==2 ? \"bl-roll-critical-success\\\">Réussite critique\" : result==-1 ? \"bl-roll-critical-fail\\\">Echec critique\" : \"bl-roll-fail\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
                "altRollMessage": "",
                "rollMessageToChat": true,
                "altRollMessageToChat": true,
                "style": "bold"
              }
            ],
            [
              {
                "key": "totalFO",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "numberField",
                "label": "",
                "defaultValue": "0",
                "size": "small",
                "allowDecimal": false,
                "minVal": "0",
                "maxVal": "",
                "allowRelative": true,
                "showControls": true,
                "controlsStyle": "hover",
                "inputStyle": "text"
              },
              {
                "key": "totalEN",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "numberField",
                "label": "",
                "defaultValue": "0",
                "size": "small",
                "allowDecimal": false,
                "minVal": "0",
                "maxVal": "",
                "allowRelative": true,
                "showControls": true,
                "controlsStyle": "hover",
                "inputStyle": "text"
              },
              {
                "key": "totalAG",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "numberField",
                "label": "",
                "defaultValue": "0",
                "size": "small",
                "allowDecimal": false,
                "minVal": "0",
                "maxVal": "",
                "allowRelative": true,
                "showControls": true,
                "controlsStyle": "hover",
                "inputStyle": "text"
              },
              {
                "key": "totalRA",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "numberField",
                "label": "",
                "defaultValue": "0",
                "size": "small",
                "allowDecimal": false,
                "minVal": "0",
                "maxVal": "",
                "allowRelative": true,
                "showControls": true,
                "controlsStyle": "hover",
                "inputStyle": "text"
              },
              {
                "key": "totalPE",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "numberField",
                "label": "",
                "defaultValue": "0",
                "size": "small",
                "allowDecimal": false,
                "minVal": "0",
                "maxVal": "",
                "allowRelative": true,
                "showControls": true,
                "controlsStyle": "hover",
                "inputStyle": "text"
              },
              {
                "key": "totalVO",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "numberField",
                "label": "",
                "defaultValue": "0",
                "size": "small",
                "allowDecimal": false,
                "minVal": "0",
                "maxVal": "",
                "allowRelative": true,
                "showControls": true,
                "controlsStyle": "hover",
                "inputStyle": "text"
              }
            ]
          ],
          "cols": 6,
          "rows": 2,
          "layout": "cccccc"
        },
        {
          "key": "",
          "cssClass": "",
          "role": "0",
          "permission": "0",
          "tooltip": "",
          "visibilityFormula": "",
          "type": "table",
          "contents": [
            [
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "panel",
                "contents": [
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "Points de Vie",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "Guérison quotidienne",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "staff-snake",
                    "value": "",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "${#dice:= totalEN <= 5 ? '1d6-1' : totalEN <= 8 ? '1d6' : totalEN <= 12 ? '1d6+1' : totalEN <= 15 ? '1d10' : totalEN <= 18 ? '1d10+2' : totalEN <=20 ? '2d10' : '3d10'}$\n\n<p>Guérison quotidienne <strong>+${pdv:= [:dice:]}$</strong> points de vie pour un total de <strong>${!setPropertyInEntity('self', 'vie', min(vieMax, vie+pdv))}$</strong></p>",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  }
                ],
                "flow": "horizontal",
                "align": "center",
                "collapsible": false,
                "defaultCollapsed": true,
                "title": "",
                "titleStyle": "default"
              },
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "label",
                "size": "full-size",
                "icon": "",
                "value": "Armure",
                "prefix": "",
                "suffix": "",
                "rollMessage": "",
                "altRollMessage": "",
                "rollMessageToChat": true,
                "altRollMessageToChat": true,
                "style": "label"
              },
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "label",
                "size": "full-size",
                "icon": "",
                "value": "Initiative",
                "prefix": "",
                "suffix": "",
                "rollMessage": "",
                "altRollMessage": "",
                "rollMessageToChat": true,
                "altRollMessageToChat": false,
                "style": "label"
              },
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "label",
                "size": "full-size",
                "icon": "",
                "value": "Dommages",
                "prefix": "",
                "suffix": "",
                "rollMessage": "",
                "altRollMessage": "",
                "rollMessageToChat": true,
                "altRollMessageToChat": false,
                "style": "label"
              }
            ],
            [
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "panel",
                "contents": [
                  {
                    "key": "vie",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "numberField",
                    "label": "",
                    "defaultValue": "${vieMax}$",
                    "size": "small",
                    "allowDecimal": false,
                    "minVal": "0",
                    "maxVal": "${vieMax}$",
                    "allowRelative": true,
                    "showControls": true,
                    "controlsStyle": "hover",
                    "inputStyle": "text"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "/ ${vieMax}$",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  }
                ],
                "flow": "horizontal",
                "align": "center",
                "collapsible": false,
                "defaultCollapsed": true,
                "title": "",
                "titleStyle": "default"
              },
              {
                "key": "armure",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "numberField",
                "label": "",
                "defaultValue": "0",
                "size": "small",
                "allowDecimal": false,
                "minVal": "0",
                "maxVal": "",
                "allowRelative": true,
                "showControls": true,
                "controlsStyle": "hover",
                "inputStyle": "text"
              },
              {
                "key": "",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "panel",
                "contents": [
                  {
                    "key": "bonusInitiative",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "numberField",
                    "label": "",
                    "defaultValue": "0",
                    "size": "small",
                    "allowDecimal": false,
                    "minVal": "",
                    "maxVal": "",
                    "allowRelative": false,
                    "showControls": false,
                    "controlsStyle": "hover",
                    "inputStyle": "text"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "${initiative}$",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "bold"
                  }
                ],
                "flow": "vertical",
                "align": "center",
                "collapsible": false,
                "defaultCollapsed": true,
                "title": "",
                "titleStyle": "default"
              },
              {
                "key": "dommages",
                "cssClass": "",
                "role": "0",
                "permission": "0",
                "tooltip": "",
                "visibilityFormula": "",
                "type": "select",
                "label": "",
                "defaultValue": "1",
                "size": "small",
                "selectedOptionType": "custom",
                "options": [
                  {
                    "key": "1",
                    "value": "A"
                  },
                  {
                    "key": "2",
                    "value": "B"
                  },
                  {
                    "key": "3",
                    "value": "C"
                  },
                  {
                    "key": "4",
                    "value": "D"
                  },
                  {
                    "key": "5",
                    "value": "E"
                  },
                  {
                    "key": "6",
                    "value": "F"
                  },
                  {
                    "key": "7",
                    "value": "G"
                  },
                  {
                    "key": "8",
                    "value": "H"
                  },
                  {
                    "key": "9",
                    "value": "I"
                  }
                ]
              }
            ]
          ],
          "cols": 4,
          "rows": 2,
          "layout": "cccc"
        },
        {
          "key": "",
          "cssClass": "",
          "role": "0",
          "permission": "0",
          "tooltip": "",
          "visibilityFormula": "",
          "type": "panel",
          "contents": [
            {
              "key": "competencesCombat",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "type": "table",
              "contents": [
                [
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "panel",
                    "contents": [
                      {
                        "key": "tactAucune",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "Pas de tactique",
                        "visibilityFormula": "",
                        "type": "radioButton",
                        "label": "",
                        "size": "x-small",
                        "group": "tactique",
                        "value": "Aucune",
                        "defaultChecked": true
                      },
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "type": "label",
                        "size": "full-size",
                        "icon": "",
                        "value": "Tactique",
                        "prefix": "",
                        "suffix": "",
                        "rollMessage": "",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "bold"
                      },
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "Définir aléatoirement la tactique (uniquement en attaque)",
                        "visibilityFormula": "",
                        "type": "label",
                        "size": "full-size",
                        "icon": "dice-d4",
                        "value": "",
                        "prefix": "",
                        "suffix": "",
                        "rollMessage": "${#tact:= [1d3]}$\n${#tact:= switchCase(tact,1,\"AB\",2,\"AN\",3,\"AR\",\"Aucune\")}$\n${#setPropertyInEntity('self', 'tactique', 'tact')}$\n<p>Nouvelle tactique : <strong>${! switchCase(tact,\"AB\",\"Attaque brutale\",\"AN\",\"Attaque normale\",\"AR\",\"Attaque rapide\",\"Aucune\")}$</strong></p>",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "label"
                      },
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "Définir aléatoirement la tactique (en attaque ou en défense)",
                        "visibilityFormula": "",
                        "type": "label",
                        "size": "full-size",
                        "icon": "dice-d6",
                        "value": "",
                        "prefix": "",
                        "suffix": "",
                        "rollMessage": "${#tact:= [1d4]}$\n${#tact:= switchCase(tact,1,\"AB\",2,\"AN\",3,\"AR\",4,\"ES\",\"Aucune\")}$\n${#setPropertyInEntity('self', 'tactique', 'tact')}$\n<p>Nouvelle tactique : <strong>${! switchCase(tact,\"AB\",\"Attaque brutale\",\"AN\",\"Attaque normale\",\"AR\",\"Attaque rapide\",\"ES\",\"Esquive\",\"Aucune\")}$</strong></p>",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "label"
                      }
                    ],
                    "flow": "horizontal",
                    "align": "left",
                    "collapsible": false,
                    "defaultCollapsed": true,
                    "title": "",
                    "titleStyle": "default"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "x-small",
                    "icon": "",
                    "value": "Car.",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "Base",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "Mod.",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "Total",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "bold"
                  },
                  null,
                  null,
                  null,
                  null
                ],
                [
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "panel",
                    "contents": [
                      {
                        "key": "tactAB",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "type": "radioButton",
                        "label": "",
                        "size": "x-small",
                        "group": "tactique",
                        "value": "AB",
                        "defaultChecked": false
                      },
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "type": "label",
                        "size": "full-size",
                        "icon": "",
                        "value": "<i class=\"fa-solid fa-dice-one\"></i> Attaque brutale",
                        "prefix": "",
                        "suffix": "",
                        "rollMessage": "",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "bold"
                      }
                    ],
                    "flow": "horizontal",
                    "align": "left",
                    "collapsible": false,
                    "defaultCollapsed": true,
                    "title": "",
                    "titleStyle": "default"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "FO",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  },
                  {
                    "key": "baseAB",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "numberField",
                    "label": "",
                    "defaultValue": "0",
                    "size": "small",
                    "allowDecimal": false,
                    "minVal": "0",
                    "maxVal": "",
                    "allowRelative": true,
                    "showControls": false,
                    "controlsStyle": "hover",
                    "inputStyle": "text"
                  },
                  {
                    "key": "modAB",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "${modFO}$",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "panel",
                    "contents": [
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "equalText(tactique, 'AB')",
                        "type": "label",
                        "size": "small",
                        "icon": "",
                        "value": "${totalAB}$",
                        "prefix": "",
                        "suffix": "%",
                        "rollMessage": "<!--\n  Animaux : jet de compétences de combat\n  \n  Valeur pour result in [echecCritique: -1, echec: 0, reussite: 1, reussiteCritique: 2] \n-->\n<!-- saisie de la difficulté -->\n${#concat(\n\t?{diff:\"Difficulté\"|\"0\",\"Normal\"|\"50\",\"Très facile\"|\"25\",\"Facile\"|\"-25\",\"Difficile\"|\"-50\",\"Très difficile\"},\n\t?{mod:\"Modificateur\"[number]|0}\n)}$\n\n<!-- définition du seuil et du nom du jet-->\n${#competence:= switchCase(tactique,'AB',totalAB,'AN',totalAN,'AR',totalAR,'ES',totalES)}$\n\n<!-- tactique adverse -->\n${#tactiqueAdverse:= fallback(fetchFromActor('target', 'tactique'),'Aucune')}$\n${#tactMod:= 20}$ <!-- adversaire sans tactique -->\n\n${#tactMod:= and(equalText(tactique, 'AB'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'PA',10,'ES',-10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'AN'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'PA',10,'ES',-10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'AR'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'AN',10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'ES'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'AR',-10,'FE',-10,0) : tactMod}$\n\n<!-- seuil à atteindre -->\n${#seuil:= max(competence + diff + mod + tactMod, 5)}$\n\n<!-- jet -->\n${#roll:= [1d100]}$\n${#ru:= roll%10}$\n${#result:= 0}$ \n${#result:=(or(roll == 100, roll > seuil) ? 0 : 1)}$\n${#result:=(and(result==0, ru==1) ? -1 : result)}$ <!-- échec critique -->\n${#result:=(and(result==1, ru==0) ?  2 : result)}$ <!-- réussite critique -->\n${#switchCase(result,-1,'Echec critique',0,'Echec',1,'Réussite',2,'Réussite critique','autre')}$\n\n<!-- dommages et blessures subies -->\n<!-- lecture de la table des dommages \nA  B  C  D  E  F  G  H  I  J  K  L  M  N  O  P  Q \n1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17\n-->\n<!-- en fonction de la réussite critique (ou pas) et de la tactique -->\n${#dommages:= and(result == 2, equalText(tactique, 'AB')) ? dommages+2 : dommages}$\n${#dommages:= and(result == 2, or(or(equalText(tactique, 'AN'), equalText(tactique, 'FE')), equalText(tactique, 'PA'))) ? dommages+1 : dommages}$\n${#dommages:= and(result == 1, equalText(tactique, 'AB')) ? dommages+1 : dommages}$\n${#dommages:= and(result == 1, equalText(tactique, 'AR')) ? dommages-1 : dommages}$\t\n\n<!-- bordure des dommages -->\n${#dommages:= dommages<1 ? 1 : dommages}$\n${#dommages:= dommages>17 ? 17 : dommages}$\n\n${#blessures:= 0 }$\n${#blessures:= ru==1 ? switchCase(dommages, 1,1, 2,1, 3,1, 4,1, 5,1,  6,2,  7,2,  8,3,  9,3,  10,4,  11,4,  12,5,  13,5,  14,6,  15,6,  16,7,  17,7)  : blessures}$\n${#blessures:= ru==2 ? switchCase(dommages, 1,1, 2,1, 3,1, 4,1, 5,2,  6,3,  7,4,  8,5,  9,6,  10,7,  11,8,  12,9,  13,10, 14,11, 15,12, 16,13, 17,14) : blessures}$\n${#blessures:= ru==3 ? switchCase(dommages, 1,1, 2,1, 3,1, 4,2, 5,3,  6,5,  7,6,  8,8,  9,9,  10,11, 11,12, 12,14, 13,15, 14,17, 15,18, 16,20, 17,21) : blessures}$\n${#blessures:= ru==4 ? switchCase(dommages, 1,1, 2,1, 3,2, 4,2, 5,4,  6,6,  7,8,  8,10, 9,12, 10,14, 11,16, 12,18, 13,20, 14,22, 15,24, 16,26, 17,28) : blessures}$\n${#blessures:= ru==5 ? switchCase(dommages, 1,1, 2,1, 3,2, 4,3, 5,5,  6,8,  7,10, 8,13, 9,15, 10,18, 11,20, 12,23, 13,25, 14,28, 15,30, 16,33, 17,35) : blessures}$\n${#blessures:= ru==6 ? switchCase(dommages, 1,1, 2,2, 3,2, 4,3, 5,6,  6,9,  7,12, 8,15, 9,18, 10,21, 11,24, 12,27, 13,30, 14,33, 15,36, 16,39, 17,42) : blessures}$\n${#blessures:= ru==7 ? switchCase(dommages, 1,1, 2,2, 3,3, 4,4, 5,7,  6,11, 7,14, 8,18, 9,21, 10,25, 11,28, 12,32, 13,35, 14,39, 15,42, 16,46, 17,49) : blessures}$\n${#blessures:= ru==8 ? switchCase(dommages, 1,1, 2,2, 3,3, 4,4, 5,8,  6,12, 7,16, 8,20, 9,24, 10,28, 11,32, 12,36, 13,40, 14,44, 15,18, 16,52, 17,56) : blessures}$\n${#blessures:= ru==9 ? switchCase(dommages, 1,2, 2,2, 3,3, 4,5, 5,9,  6,14, 7,18, 8,23, 9,27, 10,32, 11,36, 12,41, 13,45, 14,50, 15,54, 16,59, 17,63) : blessures}$\n${#blessures:= ru==0 ? switchCase(dommages, 1,2, 2,2, 3,3, 4,5, 5,10, 6,15, 7,20, 8,25, 9,30, 10,35, 11,40, 12,45, 13,50, 14,55, 15,60, 16,65, 17,70) : blessures}$\n\n<!-- @TODO prise en compte de l'armure adverse (et de la capacité Point faible) -->\n\n<!-- localisation -->\n${#dizaine:= floor(roll/10)}$\n${#dizaine:= dizaine == 10 ? 0 : dizaine}$\n${#loc:= ru*10+dizaine}$\n${#loc:= loc>90 ? \"Jambe gauche\" : loc>80 ? \"Jambe droite\" : loc>65 ? \"Abdomen\" : loc>50 ? \"Bras gauche\" : loc>35 ? \"Bras droit\" : loc>10 ? \"Torse\" : \"Tête\"}$\n\n<!-- affichage -->\n<div>\n  <table>\n    <tbody>\n      <tr>\n        <td rowspan=\"2\">\n            <div><img class=\"bl-roll-image\" src=\"\"></img></div>\n        </td>\n        <th>\n          <h3>${!name}$</h3>\n        </th>\n      </tr>\n      <tr>\n        <td>\n          ${!switchCase(tactique,'AB','Attaque brutale','AN','Attaque normale','AR','Attaque rapide','ES','Esquive','Aucune tactique')}$\n        </td>\n      </tr>\n    </tbody>\n  </table>\n\n  <table>\n    <tbody>\n      <tr>\n        <th style=\"width:50%;\">\n          d100\n        </th>\n        <td>\n          <div class=\"bl-dropdown\">\n            <p><strong>${!roll}$</strong> / ${!seuil}$</p>\n            <div class=\"bl-dropdown-content\">\n              <p>Compétence : ${!competence}$</p>\n              <p>Tactique adverse (${!tactiqueAdverse}$) : ${!tactMod}$</p>\n              <p>Difficulté : ${!switchCase(diff,\"0\",\"normale\",\"50\",\"très facile\",\"25\",\"facile\",\"-25\",\"difficile\",\"-50\",\"très difficile\")}$ (${!diff}$)</p>\n              <p>Modificateur : ${!mod}$</p>\n            </div>\n          </div>\n        </td>\n      </tr>\n  ${!result>0 ? concat(\"<tr><th>Localisation</th><td>\",loc, \"</td></tr><tr><th>RU</th><td>\",ru,\"</td></tr>\") : ''}$\n      <tr>\n        <td colspan=\"2\">\n          <p class=\"bl-result ${!result==1 ? \"bl-roll-success\\\">Réussite\" : result==2 ? \"bl-roll-critical-success\\\">Réussite critique\" : result==-1 ? \"bl-roll-critical-fail\\\">Echec critique\" : \"bl-roll-fail\\\">Echec\"}$</p>\n        </td>\n      </tr>\n  ${!result>0 ? concat(\"<tr><th>Blessures infligées\", \"</th><td>\", blessures, \"</td></tr>\") : ''}$\n    </tbody>\n  </table>\n</div>\n",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "bold"
                      },
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "not(equalText(tactique, 'AB'))",
                        "type": "label",
                        "size": "small",
                        "icon": "",
                        "value": "${totalAB}$",
                        "prefix": "",
                        "suffix": "%",
                        "rollMessage": "",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "bold"
                      }
                    ],
                    "flow": "vertical",
                    "align": "right",
                    "collapsible": false,
                    "defaultCollapsed": true,
                    "title": "",
                    "titleStyle": "default"
                  },
                  null,
                  null,
                  null,
                  null
                ],
                [
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "panel",
                    "contents": [
                      {
                        "key": "tactAN",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "type": "radioButton",
                        "label": "",
                        "size": "x-small",
                        "group": "tactique",
                        "value": "AN",
                        "defaultChecked": false
                      },
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "type": "label",
                        "size": "full-size",
                        "icon": "",
                        "value": "<p><i class=\"fa-solid fa-dice-two\"></i> Attaque normale",
                        "prefix": "",
                        "suffix": "",
                        "rollMessage": "",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "bold"
                      }
                    ],
                    "flow": "horizontal",
                    "align": "left",
                    "collapsible": false,
                    "defaultCollapsed": true,
                    "title": "",
                    "titleStyle": "default"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "AG",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  },
                  {
                    "key": "baseAN",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "numberField",
                    "label": "",
                    "defaultValue": "0",
                    "size": "small",
                    "allowDecimal": false,
                    "minVal": "0",
                    "maxVal": "",
                    "allowRelative": false,
                    "showControls": false,
                    "controlsStyle": "hover",
                    "inputStyle": "text"
                  },
                  {
                    "key": "modAN",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "${modAG}$",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "panel",
                    "contents": [
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "equalText(tactique, 'AN')",
                        "type": "label",
                        "size": "small",
                        "icon": "",
                        "value": "${totalAN}$",
                        "prefix": "",
                        "suffix": "%",
                        "rollMessage": "<!--\n  Animaux : jet de compétences de combat\n  \n  Valeur pour result in [echecCritique: -1, echec: 0, reussite: 1, reussiteCritique: 2] \n-->\n<!-- saisie de la difficulté -->\n${#concat(\n\t?{diff:\"Difficulté\"|\"0\",\"Normal\"|\"50\",\"Très facile\"|\"25\",\"Facile\"|\"-25\",\"Difficile\"|\"-50\",\"Très difficile\"},\n\t?{mod:\"Modificateur\"[number]|0}\n)}$\n\n<!-- définition du seuil et du nom du jet-->\n${#competence:= switchCase(tactique,'AB',totalAB,'AN',totalAN,'AR',totalAR,'ES',totalES)}$\n\n<!-- tactique adverse -->\n${#tactiqueAdverse:= fallback(fetchFromActor('target', 'tactique'),'Aucune')}$\n${#tactMod:= 20}$ <!-- adversaire sans tactique -->\n\n${#tactMod:= and(equalText(tactique, 'AB'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'PA',10,'ES',-10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'AN'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'PA',10,'ES',-10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'AR'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'AN',10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'ES'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'AR',-10,'FE',-10,0) : tactMod}$\n\n<!-- seuil à atteindre -->\n${#seuil:= max(competence + diff + mod + tactMod, 5)}$\n\n<!-- jet -->\n${#roll:= [1d100]}$\n${#ru:= roll%10}$\n${#result:= 0}$ \n${#result:=(or(roll == 100, roll > seuil) ? 0 : 1)}$\n${#result:=(and(result==0, ru==1) ? -1 : result)}$ <!-- échec critique -->\n${#result:=(and(result==1, ru==0) ?  2 : result)}$ <!-- réussite critique -->\n${#switchCase(result,-1,'Echec critique',0,'Echec',1,'Réussite',2,'Réussite critique','autre')}$\n\n<!-- dommages et blessures subies -->\n<!-- lecture de la table des dommages \nA  B  C  D  E  F  G  H  I  J  K  L  M  N  O  P  Q \n1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17\n-->\n<!-- en fonction de la réussite critique (ou pas) et de la tactique -->\n${#dommages:= and(result == 2, equalText(tactique, 'AB')) ? dommages+2 : dommages}$\n${#dommages:= and(result == 2, or(or(equalText(tactique, 'AN'), equalText(tactique, 'FE')), equalText(tactique, 'PA'))) ? dommages+1 : dommages}$\n${#dommages:= and(result == 1, equalText(tactique, 'AB')) ? dommages+1 : dommages}$\n${#dommages:= and(result == 1, equalText(tactique, 'AR')) ? dommages-1 : dommages}$\t\n\n<!-- bordure des dommages -->\n${#dommages:= dommages<1 ? 1 : dommages}$\n${#dommages:= dommages>17 ? 17 : dommages}$\n\n${#blessures:= 0 }$\n${#blessures:= ru==1 ? switchCase(dommages, 1,1, 2,1, 3,1, 4,1, 5,1,  6,2,  7,2,  8,3,  9,3,  10,4,  11,4,  12,5,  13,5,  14,6,  15,6,  16,7,  17,7)  : blessures}$\n${#blessures:= ru==2 ? switchCase(dommages, 1,1, 2,1, 3,1, 4,1, 5,2,  6,3,  7,4,  8,5,  9,6,  10,7,  11,8,  12,9,  13,10, 14,11, 15,12, 16,13, 17,14) : blessures}$\n${#blessures:= ru==3 ? switchCase(dommages, 1,1, 2,1, 3,1, 4,2, 5,3,  6,5,  7,6,  8,8,  9,9,  10,11, 11,12, 12,14, 13,15, 14,17, 15,18, 16,20, 17,21) : blessures}$\n${#blessures:= ru==4 ? switchCase(dommages, 1,1, 2,1, 3,2, 4,2, 5,4,  6,6,  7,8,  8,10, 9,12, 10,14, 11,16, 12,18, 13,20, 14,22, 15,24, 16,26, 17,28) : blessures}$\n${#blessures:= ru==5 ? switchCase(dommages, 1,1, 2,1, 3,2, 4,3, 5,5,  6,8,  7,10, 8,13, 9,15, 10,18, 11,20, 12,23, 13,25, 14,28, 15,30, 16,33, 17,35) : blessures}$\n${#blessures:= ru==6 ? switchCase(dommages, 1,1, 2,2, 3,2, 4,3, 5,6,  6,9,  7,12, 8,15, 9,18, 10,21, 11,24, 12,27, 13,30, 14,33, 15,36, 16,39, 17,42) : blessures}$\n${#blessures:= ru==7 ? switchCase(dommages, 1,1, 2,2, 3,3, 4,4, 5,7,  6,11, 7,14, 8,18, 9,21, 10,25, 11,28, 12,32, 13,35, 14,39, 15,42, 16,46, 17,49) : blessures}$\n${#blessures:= ru==8 ? switchCase(dommages, 1,1, 2,2, 3,3, 4,4, 5,8,  6,12, 7,16, 8,20, 9,24, 10,28, 11,32, 12,36, 13,40, 14,44, 15,18, 16,52, 17,56) : blessures}$\n${#blessures:= ru==9 ? switchCase(dommages, 1,2, 2,2, 3,3, 4,5, 5,9,  6,14, 7,18, 8,23, 9,27, 10,32, 11,36, 12,41, 13,45, 14,50, 15,54, 16,59, 17,63) : blessures}$\n${#blessures:= ru==0 ? switchCase(dommages, 1,2, 2,2, 3,3, 4,5, 5,10, 6,15, 7,20, 8,25, 9,30, 10,35, 11,40, 12,45, 13,50, 14,55, 15,60, 16,65, 17,70) : blessures}$\n\n<!-- @TODO prise en compte de l'armure adverse (et de la capacité Point faible) -->\n\n<!-- localisation -->\n${#dizaine:= floor(roll/10)}$\n${#dizaine:= dizaine == 10 ? 0 : dizaine}$\n${#loc:= ru*10+dizaine}$\n${#loc:= loc>90 ? \"Jambe gauche\" : loc>80 ? \"Jambe droite\" : loc>65 ? \"Abdomen\" : loc>50 ? \"Bras gauche\" : loc>35 ? \"Bras droit\" : loc>10 ? \"Torse\" : \"Tête\"}$\n\n<!-- affichage -->\n<div>\n  <table>\n    <tbody>\n      <tr>\n        <td rowspan=\"2\">\n            <div><img class=\"bl-roll-image\" src=\"\"></img></div>\n        </td>\n        <th>\n          <h3>${!name}$</h3>\n        </th>\n      </tr>\n      <tr>\n        <td>\n          ${!switchCase(tactique,'AB','Attaque brutale','AN','Attaque normale','AR','Attaque rapide','ES','Esquive','Aucune tactique')}$\n        </td>\n      </tr>\n    </tbody>\n  </table>\n\n  <table>\n    <tbody>\n      <tr>\n        <th style=\"width:50%;\">\n          d100\n        </th>\n        <td>\n          <div class=\"bl-dropdown\">\n            <p><strong>${!roll}$</strong> / ${!seuil}$</p>\n            <div class=\"bl-dropdown-content\">\n              <p>Compétence : ${!competence}$</p>\n              <p>Tactique adverse (${!tactiqueAdverse}$) : ${!tactMod}$</p>\n              <p>Difficulté : ${!switchCase(diff,\"0\",\"normale\",\"50\",\"très facile\",\"25\",\"facile\",\"-25\",\"difficile\",\"-50\",\"très difficile\")}$ (${!diff}$)</p>\n              <p>Modificateur : ${!mod}$</p>\n            </div>\n          </div>\n        </td>\n      </tr>\n  ${!result>0 ? concat(\"<tr><th>Localisation</th><td>\",loc, \"</td></tr><tr><th>RU</th><td>\",ru,\"</td></tr>\") : ''}$\n      <tr>\n        <td colspan=\"2\">\n          <p class=\"bl-result ${!result==1 ? \"bl-roll-success\\\">Réussite\" : result==2 ? \"bl-roll-critical-success\\\">Réussite critique\" : result==-1 ? \"bl-roll-critical-fail\\\">Echec critique\" : \"bl-roll-fail\\\">Echec\"}$</p>\n        </td>\n      </tr>\n  ${!result>0 ? concat(\"<tr><th>Blessures infligées\", \"</th><td>\", blessures, \"</td></tr>\") : ''}$\n    </tbody>\n  </table>\n</div>\n",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "bold"
                      },
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "not(equalText(tactique, 'AN'))",
                        "type": "label",
                        "size": "small",
                        "icon": "",
                        "value": "${totalAN}$",
                        "prefix": "",
                        "suffix": "%",
                        "rollMessage": "",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "bold"
                      }
                    ],
                    "flow": "vertical",
                    "align": "right",
                    "collapsible": false,
                    "defaultCollapsed": true,
                    "title": "",
                    "titleStyle": "default"
                  },
                  null,
                  null,
                  null
                ],
                [
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "panel",
                    "contents": [
                      {
                        "key": "tactAR",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "type": "radioButton",
                        "label": "",
                        "size": "x-small",
                        "group": "tactique",
                        "value": "AR",
                        "defaultChecked": false
                      },
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "type": "label",
                        "size": "full-size",
                        "icon": "",
                        "value": "<p><i class=\"fa-solid fa-dice-three\"></i> Attaque rapide",
                        "prefix": "",
                        "suffix": "",
                        "rollMessage": "",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "bold"
                      }
                    ],
                    "flow": "horizontal",
                    "align": "left",
                    "collapsible": false,
                    "defaultCollapsed": true,
                    "title": "",
                    "titleStyle": "default"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "RA",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  },
                  {
                    "key": "baseAR",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "numberField",
                    "label": "",
                    "defaultValue": "0",
                    "size": "small",
                    "allowDecimal": false,
                    "minVal": "0",
                    "maxVal": "",
                    "allowRelative": false,
                    "showControls": false,
                    "controlsStyle": "hover",
                    "inputStyle": "text"
                  },
                  {
                    "key": "modAR",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "${modRA}$",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "panel",
                    "contents": [
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "equalText(tactique, 'AR')",
                        "type": "label",
                        "size": "small",
                        "icon": "",
                        "value": "${totalAR}$",
                        "prefix": "",
                        "suffix": "%",
                        "rollMessage": "<!--\n  Animaux : jet de compétences de combat\n  \n  Valeur pour result in [echecCritique: -1, echec: 0, reussite: 1, reussiteCritique: 2] \n-->\n<!-- saisie de la difficulté -->\n${#concat(\n\t?{diff:\"Difficulté\"|\"0\",\"Normal\"|\"50\",\"Très facile\"|\"25\",\"Facile\"|\"-25\",\"Difficile\"|\"-50\",\"Très difficile\"},\n\t?{mod:\"Modificateur\"[number]|0}\n)}$\n\n<!-- définition du seuil et du nom du jet-->\n${#competence:= switchCase(tactique,'AB',totalAB,'AN',totalAN,'AR',totalAR,'ES',totalES)}$\n\n<!-- tactique adverse -->\n${#tactiqueAdverse:= fallback(fetchFromActor('target', 'tactique'),'Aucune')}$\n${#tactMod:= 20}$ <!-- adversaire sans tactique -->\n\n${#tactMod:= and(equalText(tactique, 'AB'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'PA',10,'ES',-10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'AN'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'PA',10,'ES',-10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'AR'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'AN',10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'ES'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'AR',-10,'FE',-10,0) : tactMod}$\n\n<!-- seuil à atteindre -->\n${#seuil:= max(competence + diff + mod + tactMod, 5)}$\n\n<!-- jet -->\n${#roll:= [1d100]}$\n${#ru:= roll%10}$\n${#result:= 0}$ \n${#result:=(or(roll == 100, roll > seuil) ? 0 : 1)}$\n${#result:=(and(result==0, ru==1) ? -1 : result)}$ <!-- échec critique -->\n${#result:=(and(result==1, ru==0) ?  2 : result)}$ <!-- réussite critique -->\n${#switchCase(result,-1,'Echec critique',0,'Echec',1,'Réussite',2,'Réussite critique','autre')}$\n\n<!-- dommages et blessures subies -->\n<!-- lecture de la table des dommages \nA  B  C  D  E  F  G  H  I  J  K  L  M  N  O  P  Q \n1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17\n-->\n<!-- en fonction de la réussite critique (ou pas) et de la tactique -->\n${#dommages:= and(result == 2, equalText(tactique, 'AB')) ? dommages+2 : dommages}$\n${#dommages:= and(result == 2, or(or(equalText(tactique, 'AN'), equalText(tactique, 'FE')), equalText(tactique, 'PA'))) ? dommages+1 : dommages}$\n${#dommages:= and(result == 1, equalText(tactique, 'AB')) ? dommages+1 : dommages}$\n${#dommages:= and(result == 1, equalText(tactique, 'AR')) ? dommages-1 : dommages}$\t\n\n<!-- bordure des dommages -->\n${#dommages:= dommages<1 ? 1 : dommages}$\n${#dommages:= dommages>17 ? 17 : dommages}$\n\n${#blessures:= 0 }$\n${#blessures:= ru==1 ? switchCase(dommages, 1,1, 2,1, 3,1, 4,1, 5,1,  6,2,  7,2,  8,3,  9,3,  10,4,  11,4,  12,5,  13,5,  14,6,  15,6,  16,7,  17,7)  : blessures}$\n${#blessures:= ru==2 ? switchCase(dommages, 1,1, 2,1, 3,1, 4,1, 5,2,  6,3,  7,4,  8,5,  9,6,  10,7,  11,8,  12,9,  13,10, 14,11, 15,12, 16,13, 17,14) : blessures}$\n${#blessures:= ru==3 ? switchCase(dommages, 1,1, 2,1, 3,1, 4,2, 5,3,  6,5,  7,6,  8,8,  9,9,  10,11, 11,12, 12,14, 13,15, 14,17, 15,18, 16,20, 17,21) : blessures}$\n${#blessures:= ru==4 ? switchCase(dommages, 1,1, 2,1, 3,2, 4,2, 5,4,  6,6,  7,8,  8,10, 9,12, 10,14, 11,16, 12,18, 13,20, 14,22, 15,24, 16,26, 17,28) : blessures}$\n${#blessures:= ru==5 ? switchCase(dommages, 1,1, 2,1, 3,2, 4,3, 5,5,  6,8,  7,10, 8,13, 9,15, 10,18, 11,20, 12,23, 13,25, 14,28, 15,30, 16,33, 17,35) : blessures}$\n${#blessures:= ru==6 ? switchCase(dommages, 1,1, 2,2, 3,2, 4,3, 5,6,  6,9,  7,12, 8,15, 9,18, 10,21, 11,24, 12,27, 13,30, 14,33, 15,36, 16,39, 17,42) : blessures}$\n${#blessures:= ru==7 ? switchCase(dommages, 1,1, 2,2, 3,3, 4,4, 5,7,  6,11, 7,14, 8,18, 9,21, 10,25, 11,28, 12,32, 13,35, 14,39, 15,42, 16,46, 17,49) : blessures}$\n${#blessures:= ru==8 ? switchCase(dommages, 1,1, 2,2, 3,3, 4,4, 5,8,  6,12, 7,16, 8,20, 9,24, 10,28, 11,32, 12,36, 13,40, 14,44, 15,18, 16,52, 17,56) : blessures}$\n${#blessures:= ru==9 ? switchCase(dommages, 1,2, 2,2, 3,3, 4,5, 5,9,  6,14, 7,18, 8,23, 9,27, 10,32, 11,36, 12,41, 13,45, 14,50, 15,54, 16,59, 17,63) : blessures}$\n${#blessures:= ru==0 ? switchCase(dommages, 1,2, 2,2, 3,3, 4,5, 5,10, 6,15, 7,20, 8,25, 9,30, 10,35, 11,40, 12,45, 13,50, 14,55, 15,60, 16,65, 17,70) : blessures}$\n\n<!-- @TODO prise en compte de l'armure adverse (et de la capacité Point faible) -->\n\n<!-- localisation -->\n${#dizaine:= floor(roll/10)}$\n${#dizaine:= dizaine == 10 ? 0 : dizaine}$\n${#loc:= ru*10+dizaine}$\n${#loc:= loc>90 ? \"Jambe gauche\" : loc>80 ? \"Jambe droite\" : loc>65 ? \"Abdomen\" : loc>50 ? \"Bras gauche\" : loc>35 ? \"Bras droit\" : loc>10 ? \"Torse\" : \"Tête\"}$\n\n<!-- affichage -->\n<div>\n  <table>\n    <tbody>\n      <tr>\n        <td rowspan=\"2\">\n            <div><img class=\"bl-roll-image\" src=\"\"></img></div>\n        </td>\n        <th>\n          <h3>${!name}$</h3>\n        </th>\n      </tr>\n      <tr>\n        <td>\n          ${!switchCase(tactique,'AB','Attaque brutale','AN','Attaque normale','AR','Attaque rapide','ES','Esquive','Aucune tactique')}$\n        </td>\n      </tr>\n    </tbody>\n  </table>\n\n  <table>\n    <tbody>\n      <tr>\n        <th style=\"width:50%;\">\n          d100\n        </th>\n        <td>\n          <div class=\"bl-dropdown\">\n            <p><strong>${!roll}$</strong> / ${!seuil}$</p>\n            <div class=\"bl-dropdown-content\">\n              <p>Compétence : ${!competence}$</p>\n              <p>Tactique adverse (${!tactiqueAdverse}$) : ${!tactMod}$</p>\n              <p>Difficulté : ${!switchCase(diff,\"0\",\"normale\",\"50\",\"très facile\",\"25\",\"facile\",\"-25\",\"difficile\",\"-50\",\"très difficile\")}$ (${!diff}$)</p>\n              <p>Modificateur : ${!mod}$</p>\n            </div>\n          </div>\n        </td>\n      </tr>\n  ${!result>0 ? concat(\"<tr><th>Localisation</th><td>\",loc, \"</td></tr><tr><th>RU</th><td>\",ru,\"</td></tr>\") : ''}$\n      <tr>\n        <td colspan=\"2\">\n          <p class=\"bl-result ${!result==1 ? \"bl-roll-success\\\">Réussite\" : result==2 ? \"bl-roll-critical-success\\\">Réussite critique\" : result==-1 ? \"bl-roll-critical-fail\\\">Echec critique\" : \"bl-roll-fail\\\">Echec\"}$</p>\n        </td>\n      </tr>\n  ${!result>0 ? concat(\"<tr><th>Blessures infligées\", \"</th><td>\", blessures, \"</td></tr>\") : ''}$\n    </tbody>\n  </table>\n</div>\n",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "bold"
                      },
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "not(equalText(tactique, 'AR'))",
                        "type": "label",
                        "size": "small",
                        "icon": "",
                        "value": "${totalAR}$",
                        "prefix": "",
                        "suffix": "%",
                        "rollMessage": "",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "bold"
                      }
                    ],
                    "flow": "vertical",
                    "align": "right",
                    "collapsible": false,
                    "defaultCollapsed": true,
                    "title": "",
                    "titleStyle": "default"
                  },
                  null,
                  null,
                  null
                ],
                [
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "panel",
                    "contents": [
                      {
                        "key": "tactES",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "type": "radioButton",
                        "label": "",
                        "size": "x-small",
                        "group": "tactique",
                        "value": "ES",
                        "defaultChecked": false
                      },
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "",
                        "type": "label",
                        "size": "full-size",
                        "icon": "",
                        "value": "<p><i class=\"fa-solid fa-dice-four\"></i> Esquive",
                        "prefix": "",
                        "suffix": "",
                        "rollMessage": "",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "bold"
                      }
                    ],
                    "flow": "horizontal",
                    "align": "left",
                    "collapsible": false,
                    "defaultCollapsed": true,
                    "title": "",
                    "titleStyle": "default"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "RA",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  },
                  {
                    "key": "baseES",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "numberField",
                    "label": "",
                    "defaultValue": "0",
                    "size": "small",
                    "allowDecimal": false,
                    "minVal": "0",
                    "maxVal": "",
                    "allowRelative": false,
                    "showControls": false,
                    "controlsStyle": "hover",
                    "inputStyle": "text"
                  },
                  {
                    "key": "modES",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "label",
                    "size": "full-size",
                    "icon": "",
                    "value": "${modRA}$",
                    "prefix": "",
                    "suffix": "",
                    "rollMessage": "",
                    "altRollMessage": "",
                    "rollMessageToChat": true,
                    "altRollMessageToChat": true,
                    "style": "label"
                  },
                  {
                    "key": "",
                    "cssClass": "",
                    "role": "0",
                    "permission": "0",
                    "tooltip": "",
                    "visibilityFormula": "",
                    "type": "panel",
                    "contents": [
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "equalText(tactique, 'ES')",
                        "type": "label",
                        "size": "small",
                        "icon": "",
                        "value": "${totalES}$",
                        "prefix": "",
                        "suffix": "%",
                        "rollMessage": "<!--\n  Animaux : jet de compétences de combat\n  \n  Valeur pour result in [echecCritique: -1, echec: 0, reussite: 1, reussiteCritique: 2] \n-->\n<!-- saisie de la difficulté -->\n${#concat(\n\t?{diff:\"Difficulté\"|\"0\",\"Normal\"|\"50\",\"Très facile\"|\"25\",\"Facile\"|\"-25\",\"Difficile\"|\"-50\",\"Très difficile\"},\n\t?{mod:\"Modificateur\"[number]|0}\n)}$\n\n<!-- définition du seuil et du nom du jet-->\n${#competence:= switchCase(tactique,'AB',totalAB,'AN',totalAN,'AR',totalAR,'ES',totalES)}$\n\n<!-- tactique adverse -->\n${#tactiqueAdverse:= fallback(fetchFromActor('target', 'tactique'),'Aucune')}$\n${#tactMod:= 20}$ <!-- adversaire sans tactique -->\n\n${#tactMod:= and(equalText(tactique, 'AB'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'PA',10,'ES',-10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'AN'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'PA',10,'ES',-10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'AR'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'AN',10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'ES'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'AR',-10,'FE',-10,0) : tactMod}$\n\n<!-- seuil à atteindre -->\n${#seuil:= max(competence + diff + mod + tactMod, 5)}$\n\n<!-- jet -->\n${#roll:= [1d100]}$\n${#ru:= roll%10}$\n${#result:= 0}$ \n${#result:=(or(roll == 100, roll > seuil) ? 0 : 1)}$\n${#result:=(and(result==0, ru==1) ? -1 : result)}$ <!-- échec critique -->\n${#result:=(and(result==1, ru==0) ?  2 : result)}$ <!-- réussite critique -->\n${#switchCase(result,-1,'Echec critique',0,'Echec',1,'Réussite',2,'Réussite critique','autre')}$\n\n<!-- dommages et blessures subies -->\n<!-- lecture de la table des dommages \nA  B  C  D  E  F  G  H  I  J  K  L  M  N  O  P  Q \n1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17\n-->\n<!-- en fonction de la réussite critique (ou pas) et de la tactique -->\n${#dommages:= and(result == 2, equalText(tactique, 'AB')) ? dommages+2 : dommages}$\n${#dommages:= and(result == 2, or(or(equalText(tactique, 'AN'), equalText(tactique, 'FE')), equalText(tactique, 'PA'))) ? dommages+1 : dommages}$\n${#dommages:= and(result == 1, equalText(tactique, 'AB')) ? dommages+1 : dommages}$\n${#dommages:= and(result == 1, equalText(tactique, 'AR')) ? dommages-1 : dommages}$\t\n\n<!-- bordure des dommages -->\n${#dommages:= dommages<1 ? 1 : dommages}$\n${#dommages:= dommages>17 ? 17 : dommages}$\n\n${#blessures:= 0 }$\n${#blessures:= ru==1 ? switchCase(dommages, 1,1, 2,1, 3,1, 4,1, 5,1,  6,2,  7,2,  8,3,  9,3,  10,4,  11,4,  12,5,  13,5,  14,6,  15,6,  16,7,  17,7)  : blessures}$\n${#blessures:= ru==2 ? switchCase(dommages, 1,1, 2,1, 3,1, 4,1, 5,2,  6,3,  7,4,  8,5,  9,6,  10,7,  11,8,  12,9,  13,10, 14,11, 15,12, 16,13, 17,14) : blessures}$\n${#blessures:= ru==3 ? switchCase(dommages, 1,1, 2,1, 3,1, 4,2, 5,3,  6,5,  7,6,  8,8,  9,9,  10,11, 11,12, 12,14, 13,15, 14,17, 15,18, 16,20, 17,21) : blessures}$\n${#blessures:= ru==4 ? switchCase(dommages, 1,1, 2,1, 3,2, 4,2, 5,4,  6,6,  7,8,  8,10, 9,12, 10,14, 11,16, 12,18, 13,20, 14,22, 15,24, 16,26, 17,28) : blessures}$\n${#blessures:= ru==5 ? switchCase(dommages, 1,1, 2,1, 3,2, 4,3, 5,5,  6,8,  7,10, 8,13, 9,15, 10,18, 11,20, 12,23, 13,25, 14,28, 15,30, 16,33, 17,35) : blessures}$\n${#blessures:= ru==6 ? switchCase(dommages, 1,1, 2,2, 3,2, 4,3, 5,6,  6,9,  7,12, 8,15, 9,18, 10,21, 11,24, 12,27, 13,30, 14,33, 15,36, 16,39, 17,42) : blessures}$\n${#blessures:= ru==7 ? switchCase(dommages, 1,1, 2,2, 3,3, 4,4, 5,7,  6,11, 7,14, 8,18, 9,21, 10,25, 11,28, 12,32, 13,35, 14,39, 15,42, 16,46, 17,49) : blessures}$\n${#blessures:= ru==8 ? switchCase(dommages, 1,1, 2,2, 3,3, 4,4, 5,8,  6,12, 7,16, 8,20, 9,24, 10,28, 11,32, 12,36, 13,40, 14,44, 15,18, 16,52, 17,56) : blessures}$\n${#blessures:= ru==9 ? switchCase(dommages, 1,2, 2,2, 3,3, 4,5, 5,9,  6,14, 7,18, 8,23, 9,27, 10,32, 11,36, 12,41, 13,45, 14,50, 15,54, 16,59, 17,63) : blessures}$\n${#blessures:= ru==0 ? switchCase(dommages, 1,2, 2,2, 3,3, 4,5, 5,10, 6,15, 7,20, 8,25, 9,30, 10,35, 11,40, 12,45, 13,50, 14,55, 15,60, 16,65, 17,70) : blessures}$\n\n<!-- @TODO prise en compte de l'armure adverse (et de la capacité Point faible) -->\n\n<!-- localisation -->\n${#dizaine:= floor(roll/10)}$\n${#dizaine:= dizaine == 10 ? 0 : dizaine}$\n${#loc:= ru*10+dizaine}$\n${#loc:= loc>90 ? \"Jambe gauche\" : loc>80 ? \"Jambe droite\" : loc>65 ? \"Abdomen\" : loc>50 ? \"Bras gauche\" : loc>35 ? \"Bras droit\" : loc>10 ? \"Torse\" : \"Tête\"}$\n\n<!-- affichage -->\n<div>\n  <table>\n    <tbody>\n      <tr>\n        <td rowspan=\"2\">\n            <div><img class=\"bl-roll-image\" src=\"\"></img></div>\n        </td>\n        <th>\n          <h3>${!name}$</h3>\n        </th>\n      </tr>\n      <tr>\n        <td>\n          ${!switchCase(tactique,'AB','Attaque brutale','AN','Attaque normale','AR','Attaque rapide','ES','Esquive','Aucune tactique')}$\n        </td>\n      </tr>\n    </tbody>\n  </table>\n\n  <table>\n    <tbody>\n      <tr>\n        <th style=\"width:50%;\">\n          d100\n        </th>\n        <td>\n          <div class=\"bl-dropdown\">\n            <p><strong>${!roll}$</strong> / ${!seuil}$</p>\n            <div class=\"bl-dropdown-content\">\n              <p>Compétence : ${!competence}$</p>\n              <p>Tactique adverse (${!tactiqueAdverse}$) : ${!tactMod}$</p>\n              <p>Difficulté : ${!switchCase(diff,\"0\",\"normale\",\"50\",\"très facile\",\"25\",\"facile\",\"-25\",\"difficile\",\"-50\",\"très difficile\")}$ (${!diff}$)</p>\n              <p>Modificateur : ${!mod}$</p>\n            </div>\n          </div>\n        </td>\n      </tr>\n  ${!result>0 ? concat(\"<tr><th>Localisation</th><td>\",loc, \"</td></tr><tr><th>RU</th><td>\",ru,\"</td></tr>\") : ''}$\n      <tr>\n        <td colspan=\"2\">\n          <p class=\"bl-result ${!result==1 ? \"bl-roll-success\\\">Réussite\" : result==2 ? \"bl-roll-critical-success\\\">Réussite critique\" : result==-1 ? \"bl-roll-critical-fail\\\">Echec critique\" : \"bl-roll-fail\\\">Echec\"}$</p>\n        </td>\n      </tr>\n  ${!result>0 ? concat(\"<tr><th>Blessures infligées\", \"</th><td>\", blessures, \"</td></tr>\") : ''}$\n    </tbody>\n  </table>\n</div>\n",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "bold"
                      },
                      {
                        "key": "",
                        "cssClass": "",
                        "role": "0",
                        "permission": "0",
                        "tooltip": "",
                        "visibilityFormula": "not(equalText(tactique, 'ES'))",
                        "type": "label",
                        "size": "small",
                        "icon": "",
                        "value": "${totalES}$",
                        "prefix": "",
                        "suffix": "%",
                        "rollMessage": "",
                        "altRollMessage": "",
                        "rollMessageToChat": true,
                        "altRollMessageToChat": true,
                        "style": "bold"
                      }
                    ],
                    "flow": "vertical",
                    "align": "right",
                    "collapsible": false,
                    "defaultCollapsed": true,
                    "title": "",
                    "titleStyle": "default"
                  },
                  null,
                  null,
                  null
                ],
                [
                  null,
                  null,
                  null,
                  null,
                  null,
                  null,
                  null,
                  null
                ],
                [
                  null,
                  null,
                  null,
                  null,
                  null,
                  null,
                  null,
                  null
                ],
                [
                  null,
                  null,
                  null,
                  null,
                  null,
                  null,
                  null,
                  null
                ]
              ],
              "cols": 5,
              "rows": 5,
              "layout": "lccrr"
            },
            {
              "key": "armes",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "type": "itemContainer",
              "contents": [],
              "rowLayout": [
                {
                  "key": "initiative",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "${item.initiative}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "rollMessageToChat": true,
                  "altRollMessageToChat": true,
                  "style": "label",
                  "align": "left",
                  "colName": "Init."
                },
                {
                  "key": "dommages",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "%{return String.fromCharCode(64+${item.dommages}$);}%",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "rollMessageToChat": true,
                  "altRollMessageToChat": true,
                  "style": "label",
                  "align": "left",
                  "colName": "Dom."
                },
                {
                  "key": "solidite",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "${item.solidite}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "rollMessageToChat": true,
                  "altRollMessageToChat": true,
                  "style": "label",
                  "align": "left",
                  "colName": "Sol."
                },
                {
                  "key": "competence",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "${\nitem.competence > 0 ?concat(switchCase(item.competence,'1','AB','2','AN','3','AR','4','FE','5','PA','6','ES',''), (item.modCompetence > 0 ? '+' : ''), item.modCompetence, '%') : ''\n}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "rollMessageToChat": true,
                  "altRollMessageToChat": true,
                  "style": "label",
                  "align": "left",
                  "colName": "Comp."
                },
                {
                  "key": "mains",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "${item.mains == 2 ? \"Deux mains\" : \"Une main\"}$",
                  "visibilityFormula": "",
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "${item.mains == 2 ? \"<i class=\\\"fa-regular fa-hands\\\"></i>\" : \"<i class=\\\"fa-regular fa-hand\\\"></i>\"}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "rollMessageToChat": true,
                  "altRollMessageToChat": true,
                  "style": "label",
                  "align": "left",
                  "colName": ""
                },
                {
                  "key": "notes",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "${item.As ? 'As ' : ''}$\n${item.Am ? 'Am ' : ''}$\n${item.Cg ? 'Cg ' : ''}$\n${item.Ct ? 'Ct ' : ''}$\n${item.Pr ? 'Pr ' : ''}$\n${item.Pf ? 'Pf ' : ''}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "rollMessageToChat": true,
                  "altRollMessageToChat": true,
                  "style": "label",
                  "align": "left",
                  "colName": ""
                },
                {
                  "key": "tactique",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "type": "label",
                  "size": "full-size",
                  "icon": "",
                  "value": "${tactique}$",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "",
                  "altRollMessage": "",
                  "rollMessageToChat": true,
                  "altRollMessageToChat": true,
                  "style": "label",
                  "align": "left",
                  "colName": "Tact."
                },
                {
                  "key": "rollAttaque",
                  "cssClass": "",
                  "role": "0",
                  "permission": "0",
                  "tooltip": "",
                  "visibilityFormula": "",
                  "type": "label",
                  "size": "full-size",
                  "icon": "dice-d10",
                  "value": "",
                  "prefix": "",
                  "suffix": "",
                  "rollMessage": "<!--\n  Jet de compétences de combat\n  \n  Valeur pour result in [echecCritique: -1, echec: 0, reussite: 1, reussiteCritique: 2] \n-->\n<!-- saisie de la difficulté -->\n${#concat(\n\t?{diff:\"Difficulté\"|\"0\",\"Normal\"|\"50\",\"Très facile\"|\"25\",\"Facile\"|\"-25\",\"Difficile\"|\"-50\",\"Très difficile\"},\n\t?{mod:\"Modificateur\"[number]|0},\n  item.charge ? (?{charge:\"Charge\"[check]}) : ''\n)}$\n\n<!-- définition du seuil et du nom du jet-->\n${#competence:= switchCase(tactique,'AB',totalAB,'AN',totalAN,'AR',totalAR,'FE',totalFE,'PA',totalPA,'ES',totalES)}$\n${#xpAttr:= switchCase(tactique,'AB','xpFO','AN','xpAG','AR','xpRA','FE','xpRA','PA',totalPA,'ES',totalES)}$\n${#xpComp:= concat('xp', tactique)}$\n\n<!-- tactique adverse -->\n${#tactiqueAdverse:= fallback(fetchFromActor('target', 'tactique'),'Aucune')}$\n${#tactMod:= 20}$ <!-- adversaire sans tactique -->\n\n${#tactMod:= and(equalText(tactique, 'AB'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'PA',10,'ES',-10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'AN'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'PA',10,'ES',-10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'AR'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'AN',10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'FE'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',20,'AN',10,'FE',-20,'PA',10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'PA'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',20,'AN',10,'AR',-10,'FE',-10,0) : tactMod}$\n${#tactMod:= and(equalText(tactique, 'ES'), not(equalText(tactiqueAdverse, 'Aucune'))) ? switchCase(tactiqueAdverse,'AB',10,'AR',-10,'FE',-10,0) : tactMod}$\n\n<!-- seuil à atteindre -->\n${#seuil:= max(competence + diff + mod + tactMod, 5)}$\n\n<!-- jet -->\n${#roll:= [1d100]}$\n${#ru:= roll%10}$\n${#result:= 0}$ \n${#result:=(or(roll == 100, roll > seuil) ? 0 : 1)}$\n${#result:=(and(result==0, ru==1) ? -1 : result)}$ <!-- échec critique -->\n${#result:=(and(result==1, ru==0) ?  2 : result)}$ <!-- réussite critique -->\n${#switchCase(result,-1,'Echec critique',0,'Echec',1,'Réussite',2,'Réussite critique','autre')}$\n<!-- expérience -->\n${#or(result == -1, result == 2) ? setPropertyInEntity('self', xpAttr, concat(xpAttr,'+1')) : ''}$\n${#or(result == -1, result == 2) ? setPropertyInEntity('self', xpComp, concat(xpComp,'+1')) : ''}$\n\n<!-- dommage et blessures subies -->\n<!-- lecture de la table des dommages \nA  B  C  D  E  F  G  H  I  J  K  L  M  N  O  P  Q \n1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17\n-->\n<!-- en fonction des dégâts de l'arme -->\n${#dommage:= item.dommages}$\n<!-- en fonction de la réussite critique (ou pas) et de la tactique -->\n${#dommage:= and(result == 2, equalText(tactique, 'AB')) ? dommage+2 : dommage}$\n${#dommage:= and(result == 2, or(or(equalText(tactique, 'AN'), equalText(tactique, 'FE')), equalText(tactique, 'PA'))) ? dommage+1 : dommage}$\n${#dommage:= and(result == 1, equalText(tactique, 'AB')) ? dommage+1 : dommage}$\n${#dommage:= and(result == 1, equalText(tactique, 'AR')) ? dommage-1 : dommage}$\t\n<!-- gestion de la charge -->\n${#dommage:= charge ? (result == 2 ? dommage+2 : (result == 1 ? dommage+1 : dommage)) : dommage}$\n\n<!-- en fonction de la force -->\n${#dommage:= totalFO<=7 ? dommage-1 : and(totalFO>=15, totalFO<=20) ? dommage+1 : totalFO>=21 ? dommage+2 : dommage}$\n<!-- bordure des dommages -->\n${#dommage:= dommage<1 ? 1 : dommage}$\n${#dommage:= dommage>17 ? 17 : dommage}$\n\n${#blessures:= 0 }$\n${#blessures:= ru==1 ? switchCase(dommage, 1,1, 2,1, 3,1, 4,1, 5,1,  6,2,  7,2,  8,3,  9,3,  10,4,  11,4,  12,5,  13,5,  14,6,  15,6,  16,7,  17,7)  : blessures}$\n${#blessures:= ru==2 ? switchCase(dommage, 1,1, 2,1, 3,1, 4,1, 5,2,  6,3,  7,4,  8,5,  9,6,  10,7,  11,8,  12,9,  13,10, 14,11, 15,12, 16,13, 17,14) : blessures}$\n${#blessures:= ru==3 ? switchCase(dommage, 1,1, 2,1, 3,1, 4,2, 5,3,  6,5,  7,6,  8,8,  9,9,  10,11, 11,12, 12,14, 13,15, 14,17, 15,18, 16,20, 17,21) : blessures}$\n${#blessures:= ru==4 ? switchCase(dommage, 1,1, 2,1, 3,2, 4,2, 5,4,  6,6,  7,8,  8,10, 9,12, 10,14, 11,16, 12,18, 13,20, 14,22, 15,24, 16,26, 17,28) : blessures}$\n${#blessures:= ru==5 ? switchCase(dommage, 1,1, 2,1, 3,2, 4,3, 5,5,  6,8,  7,10, 8,13, 9,15, 10,18, 11,20, 12,23, 13,25, 14,28, 15,30, 16,33, 17,35) : blessures}$\n${#blessures:= ru==6 ? switchCase(dommage, 1,1, 2,2, 3,2, 4,3, 5,6,  6,9,  7,12, 8,15, 9,18, 10,21, 11,24, 12,27, 13,30, 14,33, 15,36, 16,39, 17,42) : blessures}$\n${#blessures:= ru==7 ? switchCase(dommage, 1,1, 2,2, 3,3, 4,4, 5,7,  6,11, 7,14, 8,18, 9,21, 10,25, 11,28, 12,32, 13,35, 14,39, 15,42, 16,46, 17,49) : blessures}$\n${#blessures:= ru==8 ? switchCase(dommage, 1,1, 2,2, 3,3, 4,4, 5,8,  6,12, 7,16, 8,20, 9,24, 10,28, 11,32, 12,36, 13,40, 14,44, 15,18, 16,52, 17,56) : blessures}$\n${#blessures:= ru==9 ? switchCase(dommage, 1,2, 2,2, 3,3, 4,5, 5,9,  6,14, 7,18, 8,23, 9,27, 10,32, 11,36, 12,41, 13,45, 14,50, 15,54, 16,59, 17,63) : blessures}$\n${#blessures:= ru==0 ? switchCase(dommage, 1,2, 2,2, 3,3, 4,5, 5,10, 6,15, 7,20, 8,25, 9,30, 10,35, 11,40, 12,45, 13,50, 14,55, 15,60, 16,65, 17,70) : blessures}$\n\n<!-- @TODO prise en compte de l'armure adverse (et de la capacité Point faible) -->\n\n<!-- localisation -->\n${#dizaine:= floor(roll/10)}$\n${#dizaine:= dizaine == 10 ? 0 : dizaine}$\n${#loc:= ru*10+dizaine}$\n${#loc:= loc>90 ? \"Jambe gauche\" : loc>80 ? \"Jambe droite\" : loc>65 ? \"Abdomen\" : loc>50 ? \"Bras gauche\" : loc>35 ? \"Bras droit\" : loc>10 ? \"Torse\" : \"Tête\"}$\n\n<!-- expérience -->\n  <!-- compétence -->\n  ${#xpComp:=  concat('xp', tactique)}$\n  ${#bonusComp:= concat('bonus', tactique)}$\n\n  ${#newXp:= or(result == -1, result == 2) ? setPropertyInEntity('self', xpComp, concat(xpComp,'+1')) : ''}$\n  ${#augmentComp:= false}$\n  ${#augmentComp:= and(competence < 25,  newXp == 1) ? true : augmentComp}$\n  ${#augmentComp:= and(competence < 50,  newXp == 2) ? true : augmentComp}$\n  ${#augmentComp:= and(competence >= 50, newXp == 5) ? true : augmentComp}$ \n  ${#augmentComp ? setPropertyInEntity('self', bonusComp, concat(bonusComp, '+5')) : \"pas d'augmentation de la compétence\"}$\n  ${#augmentComp ? setPropertyInEntity('self', xpComp, 0) : \"pas de remise à zéro de l'xp de la compétence\"}$\n\n  <!-- caractéristique liée -->\n  ${#xpCar:= switchCase(tactique,'AB','xpFO','AN','xpAG','AR','xpRA','FE','xpRA','PA','xpRA','ES','xpRA')}$\n  ${#bonusCar:= replace(xpCar, 'xp', 'bonus')}$\n  ${#totalCar:= replace(xpCar, 'xp', 'total')}$\n  ${#totalCar:= recalculate(concat(\"$\", \"{\", totalCar, \"}\", \"$\"))}$\n\n  ${#newXp:= or(result == -1, result == 2) ? setPropertyInEntity('self', xpCar, concat(xpCar,'+1')) : ''}$\n\n  ${#newXp:= (or(result == -1, result == 2) ? setPropertyInEntity('self', xpCar, concat(xpCar,'+1')) : 0)}$\n  ${#augmentCar:= newXp == totalCar ? true : false}$\n  ${#augmentCar ? setPropertyInEntity('self', bonusCar, concat(bonusCar,'+1')) : \"pas d'augmentation de la caractéristique\"}$\n  ${#augmentCar ? setPropertyInEntity('self', xpCar, 0) : \"pas de remise à zéro de l'xp de la caractéristique\"}$\n\n<!-- affichage -->\n<div>\n  <table>\n    <tbody>\n      <tr>\n        <td rowspan=\"2\">\n            <div><img class=\"bl-roll-image\" src=\"${!%{return linkedEntity.img}%}$\"></img></div>\n        </td>\n        <th>\n          <h3>${!item.name}$</h3>\n        </th>\n      </tr>\n      <tr>\n        <td>\n          ${!switchCase(tactique,'AB','Attaque brutale','AN','Attaque normale','AR','Attaque rapide','FE','Feinte','PA','Parade','ES','Esquive','Aucune tactique')}$\n        </td>\n      </tr>\n    </tbody>\n  </table>\n\n  <table>\n    <tbody>\n      <tr>\n        <th style=\"width:50%;\">\n          d100\n        </th>\n        <td>\n          <div class=\"bl-dropdown\">\n            <p><strong>${!roll}$</strong> / ${!seuil}$</p>\n            <div class=\"bl-dropdown-content\">\n              <p>Compétence : ${!competence}$</p>\n              <p>Tactique adverse (${!tactiqueAdverse}$) : ${!tactMod}$</p>\n              <p>Difficulté : ${!switchCase(diff,\"0\",\"normale\",\"50\",\"très facile\",\"25\",\"facile\",\"-25\",\"difficile\",\"-50\",\"très difficile\")}$ (${!diff}$)</p>\n              <p>Modificateur : ${!mod}$</p>\n            </div>\n          </div>\n        </td>\n      </tr>\n  ${!result>0 ? concat(\"<tr><th>Localisation</th><td>\",loc, \"</td></tr><tr><th>RU</th><td>\",ru,\"</td></tr>\") : ''}$\n      <tr>\n        <td colspan=\"2\">\n          <p class=\"bl-result ${!result==1 ? \"bl-roll-success\\\">Réussite\" : result==2 ? \"bl-roll-critical-success\\\">Réussite critique\" : result==-1 ? \"bl-roll-critical-fail\\\">Echec critique\" : \"bl-roll-fail\\\">Echec\"}$</p>\n        </td>\n      </tr>\n  ${!result>0 ? concat(\"<tr><th>Blessures infligées\",(charge ? \" (charge)\" : ''),\"</th><td>\",blessures,\"</td></tr>\") : ''}$\n    </tbody>\n  </table>\n</div>\n",
                  "altRollMessage": "",
                  "rollMessageToChat": true,
                  "altRollMessageToChat": true,
                  "style": "label",
                  "align": "left",
                  "colName": "Att."
                }
              ],
              "head": true,
              "deleteWarning": false,
              "title": "<strong>Armes</strong>",
              "hideEmpty": false,
              "sortOption": "manual",
              "headDisplay": true,
              "showDelete": true,
              "statusIcon": false,
              "nameAlign": "left",
              "nameLabel": "Arme",
              "templateFilter": [
                "k3pIjKakWR2g4lro"
              ],
              "itemFilterFormula": "item.categorie == 0 ? true : false\n    \n    ",
              "sortPredicates": []
            }
          ],
          "flow": "vertical",
          "align": "left",
          "collapsible": false,
          "defaultCollapsed": true,
          "title": "",
          "titleStyle": "title"
        },
        {
          "key": "comp",
          "cssClass": "",
          "role": "0",
          "permission": "0",
          "tooltip": "",
          "visibilityFormula": "",
          "type": "dynamicTable",
          "contents": [],
          "rowLayout": [
            {
              "key": "code",
              "cssClass": "",
              "role": "3",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "type": "textField",
              "label": "",
              "defaultValue": "",
              "size": "m-small",
              "charList": "",
              "autocomplete": "",
              "align": "left",
              "colName": ""
            },
            {
              "key": "nom",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "type": "label",
              "size": "medium",
              "icon": "",
              "value": "${switchCase(sameRow('code'), 'Discretion','Discrétion', 'Reperage','Repérage', 'Seduction','Séduction', sameRow('code'))}$",
              "prefix": "",
              "suffix": "",
              "rollMessage": "",
              "altRollMessage": "",
              "rollMessageToChat": true,
              "altRollMessageToChat": true,
              "style": "bold",
              "align": "left",
              "colName": "Compétence"
            },
            {
              "key": "car",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "type": "label",
              "size": "x-small",
              "icon": "",
              "value": "${switchCase(sameRow('code'), 'Acrobatie','AG', 'Course','EN', 'Discretion','AG',  'Nage','EN', 'Reperage','PE', 'Code inconnu')}$",
              "prefix": "",
              "suffix": "",
              "rollMessage": "",
              "altRollMessage": "",
              "rollMessageToChat": true,
              "altRollMessageToChat": true,
              "style": "label",
              "align": "center",
              "colName": "Car."
            },
            {
              "key": "base",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "type": "numberField",
              "label": "",
              "defaultValue": "0",
              "size": "small",
              "allowDecimal": false,
              "minVal": "0",
              "maxVal": "",
              "allowRelative": false,
              "showControls": false,
              "controlsStyle": "hover",
              "inputStyle": "text",
              "align": "right",
              "colName": "Base"
            },
            {
              "key": "modificateur",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "",
              "visibilityFormula": "",
              "type": "label",
              "size": "full-size",
              "icon": "",
              "value": "${fallback(recalculate(concat(\"$\", \"{mod\", sameRow('car'), \"}\",\"$\")), 0)}$",
              "prefix": "",
              "suffix": "",
              "rollMessage": "",
              "altRollMessage": "",
              "rollMessageToChat": true,
              "altRollMessageToChat": true,
              "style": "label",
              "align": "right",
              "colName": "Mod."
            },
            {
              "key": "total",
              "cssClass": "",
              "role": "0",
              "permission": "0",
              "tooltip": "Clic pour lancer \"${sameRow('nom')}$\"",
              "visibilityFormula": "",
              "type": "label",
              "size": "full-size",
              "icon": "dice-d10",
              "value": "${sameRow('base') + sameRow('modificateur')}$",
              "prefix": "",
              "suffix": "%",
              "rollMessage": "<!--\n  Jet de compétences\n  \n  Valeur pour result in [echecCritique: -1, echec: 0, reussite: 1, reussiteCritique: 2] \n-->\n<!-- saisie de la difficulté -->\n${#concat(\n\t?{diff:\"Difficulté\"|\"0\",\"Normal\"|\"50\",\"Très facile\"|\"25\",\"Facile\"|\"-25\",\"Difficile\"|\"-50\",\"Très difficile\"},\n\t?{mod:\"Modificateur\"[number]|0}\n)}$\n<!-- définition du seuil et du nom du jet-->\n${#seuil:=    max(sameRow('total') + diff + mod, 5)}$\n${#nom:=      sameRow('nom')}$\n\n<!-- jet -->\n${#roll:= [1d100]}$\n\n${#ru:= roll%10}$\n${#result:= 0}$ \n${#result:=(or(roll == 100, roll > seuil) ? 0 : 1)}$\n${#result:=(and(result==0, ru==1) ? -1 : result)}$ <!-- échec critique -->\n${#result:=(and(result==1, ru==0) ?  2 : result)}$ <!-- réussite critique -->\n${#switchCase(result,-1,'Echec critique',0,'Echec',1,'Réussite',2,'Réussite critique','autre')}$\n\n<!-- affichage -->\n<h3>${!nom}$</h3>\n<table>\n  <tbody>\n    <tr>\n      <td style=\"width:50%;\">\n        <h4>d100</h4>\n      </td>\n      <td>\n        <div class=\"bl-dropdown\">\n          <p><strong>${!roll}$</strong> / ${!seuil}$</p>\n          <div class=\"bl-dropdown-content\">\n            <p>Difficulté : ${!switchCase(diff,\"0\",\"normale\",\"50\",\"très facile\",\"25\",\"facile\",\"-25\",\"difficile\",\"-50\",\"très difficile\")}$ (${!diff}$)</p>\n            <p>Modificateur : ${!mod}$</p>\n          </div>\n        </div>\n      </td>\n    </tr>\n    <tr>\n      <td colspan=\"2\">\n        <p class=\"bl-result ${!result==1 ? \"bl-roll-success\\\">Réussite\" : result==2 ? \"bl-roll-critical-success\\\">Réussite critique\" : result==-1 ? \"bl-roll-critical-fail\\\">Echec critique\" : \"bl-roll-fail\\\">Echec\"}$</p>\n      </td>\n    </tr>\n  </tbody>\n</table>",
              "altRollMessage": "",
              "rollMessageToChat": true,
              "altRollMessageToChat": true,
              "style": "bold",
              "align": "right",
              "colName": "Total"
            }
          ],
          "head": true,
          "deleteWarning": true,
          "predefinedLines": [
            {
              "$deleted": true,
              "$predefinedIdx": 0,
              "$deletionDisabled": true
            },
            {
              "$deleted": false,
              "$predefinedIdx": 1,
              "$deletionDisabled": true,
              "nom": "Acrobatie",
              "car": "AG",
              "code": "Acrobatie",
              "bonus": "0",
              "xp": "0"
            },
            {
              "$deleted": true,
              "code": "ArtisanatBatranoban",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 4,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "ArtisanatBatranoban",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 6,
              "$deletionDisabled": true
            },
            {
              "$deleted": false,
              "code": "Course",
              "bonus": "0",
              "$predefinedIdx": 3,
              "$deletionDisabled": true,
              "xp": "0"
            },
            {
              "$deleted": true,
              "code": "Seduction",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 5,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "LireEcrire",
              "car": "",
              "$predefinedIdx": 2,
              "$deletionDisabled": true,
              "bonus": "0",
              "xp": "0"
            },
            {
              "$deleted": true,
              "code": "ArtisanatDerigion",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 7,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "ArtisanatGadhar",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 8,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "ArtisanatPiorad",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 9,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "ArtisanatSekeker",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 10,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "ArtisanatThunk",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 11,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "ArtisanatVorozion",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 12,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "Astronomie",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 13,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "Commandement",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 14,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "ConnaissanceBatranoban",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 15,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "ConnaissanceDerigion",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 16,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "ConnaissanceGadhar",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 17,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "ConnaissancePiorad",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 18,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "ConnaissanceSekeker",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 19,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "ConnaissanceThunk",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 20,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "ConnaissanceVorozion",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 21,
              "$deletionDisabled": true
            },
            {
              "$deleted": false,
              "code": "Discretion",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 22,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "Equitation",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 23,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "Marchandage",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 24,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "Medecine",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 25,
              "$deletionDisabled": true
            },
            {
              "$deleted": false,
              "code": "Nage",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 26,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "Reperage",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 27,
              "$deletionDisabled": true
            },
            {
              "$deleted": false,
              "code": "Reperage",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 28,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "Tactique",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 29,
              "$deletionDisabled": true
            },
            {
              "$deleted": true,
              "code": "gfdsf",
              "bonus": "0",
              "xp": "0",
              "$predefinedIdx": 30,
              "$deletionDisabled": true
            }
          ],
          "canPlayerAdd": false,
          "sortOption": "auto",
          "sortPredicates": [
            {
              "prop": "nom",
              "operator": "lt",
              "value": ""
            }
          ]
        }
      ],
      "key": "custom_body",
      "cssClass": "",
      "role": 0,
      "permission": 0,
      "tooltip": "",
      "visibilityFormula": "",
      "type": "panel",
      "flow": "vertical",
      "align": "",
      "collapsible": false,
      "defaultCollapsed": true,
      "title": "",
      "titleStyle": "default"
    },
    "display": {
      "width": "600",
      "height": "800",
      "fix_size": false,
      "pp_width": "64",
      "pp_height": "64"
    },
    "attributeBar": {},
    "activeEffects": {},
    "activeConditionalModifierGroups": [],
    "template": "04LsoQkRiDTlRGJB",
    "props": {
      "name": "Polac",
      "totalFO": "30",
      "totalEN": "30",
      "totalAG": "8",
      "totalRA": "4",
      "totalPE": "8",
      "totalVO": "4",
      "vie": "60",
      "armure": "0",
      "initiative": "1",
      "dommages": "4",
      "baseAB": "5",
      "baseAN": "5",
      "baseAR": "5",
      "baseES": "5",
      "modAB": "45",
      "modAN": "-5",
      "modAR": "-15",
      "modES": "-15",
      "vieMax": "60",
      "modFO": "45",
      "modEN": "45",
      "modAG": "-5",
      "modRA": "-15",
      "modPE": "-5",
      "modVO": "-15",
      "totalAB": "50",
      "totalAN": "0",
      "totalAR": "-10",
      "totalES": "-10",
      "tactique": "Aucune",
      "comp": {
        "0": {
          "$deleted": false,
          "$predefinedIdx": 1,
          "$deletionDisabled": true,
          "nom": "Acrobatie",
          "car": "AG",
          "code": "Acrobatie",
          "bonus": "0",
          "xp": "0",
          "base": "5",
          "modificateur": "-5",
          "total": "0"
        },
        "1": {
          "$deleted": false,
          "code": "Course",
          "bonus": "0",
          "$predefinedIdx": 3,
          "$deletionDisabled": true,
          "xp": "0",
          "base": "5",
          "nom": "Course",
          "car": "EN",
          "modificateur": "45",
          "total": "50"
        },
        "2": {
          "$deleted": false,
          "code": "Discretion",
          "bonus": "0",
          "xp": "0",
          "$predefinedIdx": 22,
          "$deletionDisabled": true,
          "base": "5",
          "nom": "Discrétion",
          "car": "AG",
          "modificateur": "-5",
          "total": "0"
        },
        "3": {
          "$deleted": false,
          "code": "Nage",
          "bonus": "0",
          "xp": "0",
          "$predefinedIdx": 26,
          "$deletionDisabled": true,
          "base": "5",
          "nom": "Nage",
          "car": "EN",
          "modificateur": "45",
          "total": "50"
        },
        "4": {
          "$deleted": false,
          "code": "Reperage",
          "bonus": "0",
          "xp": "0",
          "$predefinedIdx": 28,
          "$deletionDisabled": true,
          "base": "5",
          "nom": "Repérage",
          "car": "PE",
          "modificateur": "-5",
          "total": "0"
        }
      },
      "description": "<p>Herbivore universel du continent de Tanæphis, le polac ressemble à un gros boeuf idiot et lent qui ne dépasse pas 1m70 au garrot mais qui pèse quelquefois plusieurs tonnes. Les polacs existent en plusieurs couleurs bien que le marron foncé soit la plus commune.</p>",
      "utilisation": "<p>L'élevage des polacs est vraiment à la portée de tout le monde et de n'importe quel paysan. Cet élevage est cependant très mal vu de ceux qui préfèrent les animaux plus durs à entretenir mais dont la viande est beaucoup plus fine (vaches, moutons, porcs). D'où les célèbres insultes Vorozions: \"T'as été élevé comme un polac” ou, pour les guerriers peureux : ‘T'es lâche comme un polac”. Notez aussi qu'un polac représente une unité de distance qui représente environ 10 kilomètres (la distance que parcourt un polac en une journée).</p>",
      "comportement": "<p>Les polacs ont presque complètement disparus dans leur milieu naturel. Leur trop faible combativité et leur lâcheté maladive ne leur a pas permis de survivre dans le monde cruel de Bloodlust. Ils sont tous de même très communs dans les fermes Vorozions et Derigions.</p>",
      "bonusInitiative": "-3",
      "initTactique": "0",
      "tactAucune": "Aucune",
      "tactAB": "AB",
      "tactAN": "AN",
      "tactAR": "AR",
      "tactES": "ES"
    },
    "templateSystemUniqueVersion": 1064832910
  },
  "prototypeToken": {
    "name": "Polac",
    "displayName": 50,
    "actorLink": false,
    "appendNumber": false,
    "prependAdjective": false,
    "width": 1,
    "height": 1,
    "texture": {
      "src": "icons/svg/mole.svg",
      "anchorX": 0.5,
      "anchorY": 0.5,
      "offsetX": 0,
      "offsetY": 0,
      "fit": "contain",
      "scaleX": 1,
      "scaleY": 1,
      "rotation": 0,
      "tint": "#ffffff",
      "alphaThreshold": 0.75
    },
    "hexagonalShape": 0,
    "lockRotation": false,
    "rotation": 0,
    "alpha": 1,
    "disposition": -1,
    "displayBars": 0,
    "bar1": {
      "attribute": null
    },
    "bar2": {
      "attribute": null
    },
    "light": {
      "negative": false,
      "priority": 0,
      "alpha": 0.5,
      "angle": 360,
      "bright": 0,
      "color": null,
      "coloration": 1,
      "dim": 0,
      "attenuation": 0.5,
      "luminosity": 0.5,
      "saturation": 0,
      "contrast": 0,
      "shadows": 0,
      "animation": {
        "type": null,
        "speed": 5,
        "intensity": 5,
        "reverse": false
      },
      "darkness": {
        "min": 0,
        "max": 1
      }
    },
    "sight": {
      "enabled": false,
      "range": 0,
      "angle": 360,
      "visionMode": "basic",
      "color": null,
      "attenuation": 0.1,
      "brightness": 0,
      "saturation": 0,
      "contrast": 0
    },
    "detectionModes": [],
    "occludable": {
      "radius": 0
    },
    "ring": {
      "enabled": false,
      "colors": {
        "ring": null,
        "background": null
      },
      "effects": 0,
      "subject": {
        "scale": 1,
        "texture": null
      }
    },
    "flags": {},
    "randomImg": false
  },
  "items": [],
  "effects": [],
  "flags": {
    "custom-system-builder": {
      "version": "4.4.2"
    }
  },
  "_stats": {
    "compendiumSource": null,
    "duplicateSource": null,
    "coreVersion": "12.331",
    "systemId": "custom-system-builder",
    "systemVersion": "4.4.2",
    "createdTime": 1744833506483,
    "modifiedTime": 1744885921144,
    "lastModifiedBy": "AjcbJ5lKJDk3HKUe"
  },
  "_id": "HaJU8zipyWIprpUn",
  "sort": 0,
  "ownership": {
    "default": 0,
    "AjcbJ5lKJDk3HKUe": 3
  },
  "_key": "!actors!HaJU8zipyWIprpUn"
}
